# ูุฌููุนุฉ ุงุฎุชุจุงุฑุงุช ูุธุงู RAG API ูุน ุชุญููู ุงูููุฏูู

ูุฌููุนุฉ ุดุงููุฉ ูู ุจุฑูุฌูุงุช ุงูุงุฎุชุจุงุฑ ูุชูููู ุฃุฏุงุก ูุธุงู RAG API ูุชูููุฏ ุงูุจูุงูุงุช ุงูุฅุญุตุงุฆูุฉ ููุจุญุซ ุงูุนููู.

## ๐ ุงููุญุชููุงุช

### ุจุฑุงูุฌ ุงูุงุฎุชุจุงุฑ ุงูุฑุฆูุณูุฉ

1. **`test_search_performance.py`** - ุงุฎุชุจุงุฑ ุฃุฏุงุก ุงูุจุญุซ ุงูุฏูุงูู
   - ููุงููุณ: Precision, Recall, F1-Score, MRR
   - ุงุฎุชุจุงุฑ ุงุณุชุนูุงูุงุช ูุชุนุฏุฏุฉ
   - ุชูููุฏ ุฌุฏุงูู LaTeX

2. **`test_video_analysis.py`** - ุงุฎุชุจุงุฑ ุฃุฏุงุก ุชุญููู ุงูููุฏูู
   - ููุงููุณ: WER, CER, ROUGE Scores
   - ุชูููู ุงููุณุฎ ุงูุตูุชู
   - ุชูููู ุฌูุฏุฉ ุงูุชูุฎูุต

3. **`test_writer_extraction.py`** - ุงุฎุชุจุงุฑ ุงุณุชุฎุฑุงุฌ ุงููุชูุงุจ
   - ููุงููุณ: Precision, Recall, F1-Score
   - ุงุฎุชุจุงุฑ ุงููุทุงุจูุฉ ุงูุถุจุงุจูุฉ
   - ููุงุฑูุฉ ุงูุชูููุงุช ุงููุฎุชููุฉ

4. **`test_performance_metrics.py`** - ููุงุณ ุงูุฃุฏุงุก ูุงูููุงุฑุฏ
   - ุฒูู ุงููุนุงูุฌุฉ
   - ุงุณุชููุงู ุงูุฐุงูุฑุฉ ูุงููุนุงูุฌ
   - ูุงุจููุฉ ุงูุชูุณุน
   - ุงูุทูุจุงุช ุงููุชุฒุงููุฉ

5. **`generate_report.py`** - ุชูููุฏ ุงูุชูุงุฑูุฑ ุงูุดุงููุฉ
   - ุชูุงุฑูุฑ Markdown
   - ุฌุฏุงูู LaTeX
   - ููุฎุตุงุช JSON

---

## ๐ ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุชุซุจูุช ุงููุชุทูุจุงุช

```bash
pip install -r requirements.txt
```

### 2. ุจููุฉ ุงููุฌูุฏุงุช

```
tests/
โโโ test_search_performance.py
โโโ test_video_analysis.py
โโโ test_writer_extraction.py
โโโ test_performance_metrics.py
โโโ generate_report.py
โโโ test_data/               # ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ
โ   โโโ search_queries.json
โ   โโโ video_test_cases.json
โ   โโโ writer_test_documents.json
โโโ test_results/            # ุงููุชุงุฆุฌ (JSON)
โโโ reports/                 # ุงูุชูุงุฑูุฑ ุงูููุงุฆูุฉ
```

---

## ๐ ููููุฉ ุงูุชุดุบูู

### ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช

```bash
cd tests
python run_all_tests.py
```

### ุชุดุบูู ุงุฎุชุจุงุฑ ูุญุฏุฏ

#### 1. ุงุฎุชุจุงุฑ ุงูุจุญุซ ุงูุฏูุงูู

```bash
python test_search_performance.py
```

**ุงููุฎุฑุฌุงุช:**
- `test_results/search_performance_results.json`
- `test_results/search_results_table.tex`

#### 2. ุงุฎุชุจุงุฑ ุชุญููู ุงูููุฏูู

```bash
python test_video_analysis.py
```

**ุงููุฎุฑุฌุงุช:**
- `test_results/video_analysis_results.json`

#### 3. ุงุฎุชุจุงุฑ ุงุณุชุฎุฑุงุฌ ุงููุชูุงุจ

```bash
python test_writer_extraction.py
```

**ุงููุฎุฑุฌุงุช:**
- `test_results/writer_extraction_results.json`

#### 4. ุงุฎุชุจุงุฑ ููุงููุณ ุงูุฃุฏุงุก

```bash
python test_performance_metrics.py
```

**ุงููุฎุฑุฌุงุช:**
- `test_results/performance_metrics.json`

#### 5. ุชูููุฏ ุงูุชูุงุฑูุฑ

```bash
python generate_report.py
```

**ุงููุฎุฑุฌุงุช:**
- `reports/full_report_*.md`
- `reports/latex_tables.tex`
- `reports/summary.json`

---

## ๐ ุฅุนุฏุงุฏ ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ

### 1. ุงุณุชุนูุงูุงุช ุงูุจุญุซ (`test_data/search_queries.json`)

```json
[
  {
    "query": "ูุง ูู ุฃุญุฏุซ ุงูุชุทูุฑุงุช ูู ุงูุทุงูุฉ ุงููุชุฌุฏุฏุฉุ",
    "language": "arabic",
    "relevant_docs": ["doc1.pdf", "doc5.pdf"],
    "top_relevant": "doc1.pdf"
  },
  {
    "query": "renewable energy developments",
    "language": "english",
    "relevant_docs": ["doc1.pdf", "doc3.pdf"],
    "top_relevant": "doc1.pdf"
  }
]
```

### 2. ุญุงูุงุช ุงุฎุชุจุงุฑ ุงูููุฏูู (`test_data/video_test_cases.json`)

```json
[
  {
    "video_filename": "test_video1.mp4",
    "language": "arabic",
    "reference_transcript": "ุงููุต ุงูุตูุชู ุงููุฑุฌุนู ุงูุตุญูุญ...",
    "reference_summary": "ุงูููุฎุต ุงููุฑุฌุนู...",
    "duration_seconds": 300
  }
]
```

### 3. ูุณุชูุฏุงุช ุงุฎุชุจุงุฑ ุงููุชูุงุจ (`test_data/writer_test_documents.json`)

```json
[
  {
    "document_name": "article1.pdf",
    "document_path": "test_data/article1.pdf",
    "ground_truth_writers": [
      "ูุญูุฏ ุฃุญูุฏ",
      "Sara Johnson"
    ]
  }
]
```

---

## ๐ ููู ุงููุชุงุฆุฌ

### ููุงููุณ ุงูุจุญุซ ุงูุฏูุงูู

- **Precision@k**: ูุณุจุฉ ุงููุชุงุฆุฌ ุงูุตุญูุญุฉ ูู ุฃูู k ูุชูุฌุฉ
- **Recall@k**: ูุณุจุฉ ุงููุชุงุฆุฌ ุงูุตุญูุญุฉ ุงูููุณุชุฑุฌุนุฉ ูู ุฅุฌูุงูู ุงููุชุงุฆุฌ ุงูุตุญูุญุฉ
- **F1-Score@k**: ุงููุชูุณุท ุงูุชูุงููู ุจูู Precision ู Recall
- **MRR**: ูุชูุณุท ููููุจ ุฑุชุจุฉ ุฃูู ูุชูุฌุฉ ุตุญูุญุฉ

### ููุงููุณ ุชุญููู ุงูููุฏูู

- **WER (Word Error Rate)**: ูุนุฏู ุฎุทุฃ ุงููููุงุช ูู ุงููุณุฎ ุงูุตูุชู
- **CER (Character Error Rate)**: ูุนุฏู ุฎุทุฃ ุงูุฃุญุฑู
- **ROUGE-1/2/L**: ููุงููุณ ุฌูุฏุฉ ุงูุชูุฎูุต

### ููุงููุณ ุงุณุชุฎุฑุงุฌ ุงููุชูุงุจ

- **Precision**: ุฏูุฉ ุงูุงุณุชุฎุฑุงุฌ (ูุณุจุฉ ุงูุงุณุชุฎุฑุงุฌุงุช ุงูุตุญูุญุฉ)
- **Recall**: ุงูุงุณุชุฏุนุงุก (ูุณุจุฉ ุงููุชูุงุจ ุงูููุชุดููู)
- **F1-Score**: ุงูุชูุงุฒู ุจูู Precision ู Recall

---

## ๐ง ุงูุชุฎุตูุต

### ุชุนุฏูู ูุนุงููุงุช ุงูุงุฎุชุจุงุฑ

ูู ูู ููู ุงุฎุชุจุงุฑุ ููููู ุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช:

```python
# test_search_performance.py
API_BASE_URL = "http://localhost:8000"  # ุนููุงู ุงูุฎุงุฏู
k_values = [1, 3, 5, 10]                # ููู k ููุงุฎุชุจุงุฑ

# test_video_analysis.py
num_frames = 10                          # ุนุฏุฏ ุงูุฅุทุงุฑุงุช ุงููุณุชุฎุฑุฌุฉ
output_language = "arabic"               # ูุบุฉ ุงูุชูุฎูุต

# test_performance_metrics.py
num_documents_list = [100, 500, 1000]   # ุฃุญุฌุงู ููุงุนุฏ ุงูุจูุงูุงุช ููุงุฎุชุจุงุฑ
```

---

## ๐ ุงุณุชุฎุฏุงู ุงููุชุงุฆุฌ ูู ุงูุจุญุซ ุงูุนููู

### 1. ุงุณุชูุฑุงุฏ ุฌุฏุงูู LaTeX

```latex
\input{test_results/search_results_table.tex}
\input{reports/latex_tables.tex}
```

### 2. ุงูุฑุณูู ุงูุจูุงููุฉ

ููููู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ูู ูููุงุช JSON ูุฅูุดุงุก ุฑุณูู ุจูุงููุฉ:

```python
import json
import matplotlib.pyplot as plt

with open('test_results/performance_metrics.json', 'r') as f:
    data = json.load(f)

# ุฑุณู ุจูุงูู ููุงุจููุฉ ุงูุชูุณุน
scalability = data['scalability_test']
x = [t['num_documents'] for t in scalability]
y = [t['avg_search_time_ms'] for t in scalability]

plt.plot(x, y)
plt.xlabel('ุนุฏุฏ ุงููุณุชูุฏุงุช')
plt.ylabel('ุฒูู ุงูุจุญุซ (ms)')
plt.title('ูุงุจููุฉ ุงูุชูุณุน')
plt.savefig('scalability_plot.png')
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ุงูุฎุงุฏู ุบูุฑ ูุชุงุญ

```
Error: Connection refused
```

**ุงูุญู:**
- ุชุฃูุฏ ูู ุชุดุบูู ุฎุงุฏู RAG API:
  ```bash
  python rag_api_server_with_video_analysis.py
  ```

### ูุดููุฉ: ุจูุงูุงุช ุงุฎุชุจุงุฑ ููููุฏุฉ

```
Warning: No test queries found
```

**ุงูุญู:**
- ูู ุจุฅูุดุงุก ูุฌูุฏ `test_data/` ูุงููููุงุช ุงููููุฐุฌูุฉ
- ุฃู ุฏุน ุงูุจุฑูุงูุฌ ูุณุชุฎุฏู ุงูุจูุงูุงุช ุงููููุฐุฌูุฉ

### ูุดููุฉ: ููุงุฐ ุงูุฐุงูุฑุฉ

```
MemoryError: Out of memory
```

**ุงูุญู:**
- ููู ุนุฏุฏ ุงูุนููุงุช ูู ุงูุงุฎุชุจุงุฑุงุช
- ุงุณุชุฎุฏู ุนููุงุช ุฃุตุบุฑ ูู ุงููุณุชูุฏุงุช/ุงูููุฏูููุงุช

---

## ๐ ุงููุชุทูุจุงุช

```txt
requests>=2.31.0
numpy>=1.24.0
psutil>=5.9.0
GPUtil>=1.4.0  # ุงุฎุชูุงุฑูุ ููุฑุงูุจุฉ GPU
matplotlib>=3.7.0  # ุงุฎุชูุงุฑูุ ููุฑุณูู ุงูุจูุงููุฉ
```

---

## ๐ ุงูุชุฑุฎูุต

ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุฌุฒุก ูู ูุดุฑูุน RAG API ููุฑุฎุตุฉ ุจููุณ ุงูุชุฑุฎูุต.

---

## ๐ค ุงููุณุงููุฉ

ูุฅุถุงูุฉ ุงุฎุชุจุงุฑุงุช ุฌุฏูุฏุฉ:

1. ุฃูุดุฆ ููู ุงุฎุชุจุงุฑ ุฌุฏูุฏ ูู `tests/`
2. ุงุชุจุน ููุณ ุงูุจููุฉ (Class-based structure)
3. ุงุญูุธ ุงููุชุงุฆุฌ ูู `test_results/`
4. ุญุฏูุซ `generate_report.py` ูุชุถููู ุงููุชุงุฆุฌ ุงูุฌุฏูุฏุฉ

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ุงูุชุญ Issue ูู ูุณุชูุฏุน GitHub.

---

**ุชู ุฅูุดุงุคูุง ุจูุงุณุทุฉ:** ูุฑูู ุชุทููุฑ RAG API
**ุงูุชุงุฑูุฎ:** ุฏูุณูุจุฑ 2025
